var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};function menu(a,b){this.x=a;this.y=b;this.type="menu"}
menu.prototype.draw=function(a){a.fillStyle="rgba(50, 50, 50, 0.8)";a.fillRect(50,50,a.canvas.width-100,a.canvas.height-100);a.save();a.restore();a.translate(a.canvas.width/window.devicePixelRatio,100);a.font="25px Arial";a.fillStyle="white";a.fillText("SpaceY",-50,0);a.restore();a.save();a.translate(200,150);a.font="20px Arial";a.fillStyle="white";a.fillText("Your are lost in space with little fuel left. To come home you need fly trough different wormholes.",0,0);a.translate(0,30);a.fillText("The only chance is to use the gravity of planets.",
0,0);a.translate(0,60);a.fillText("Use key w for getting speed, but be carefully, you don't have many fuel",0,0);a.translate(0,30);a.fillText("Use key a for rotating counterclockwise, rotating also costs fuel",0,0);a.translate(0,30);a.fillText("Use key d for rotating clockwise",0,0);a.translate(0,30);a.fillText("Use key x for reset level",0,0);a.translate(0,60);a.fillText("Good luck getting home",0,0);a.translate(0,30);a.fillText("Press esc for starting",0,0)};menu.prototype.update=function(){return null};function tb(a,b,c){this.x=a;this.y=b;this.z=1;this.s=c;this.type="toolbar"}tb.prototype.draw=function(a){a.translate(this.x,this.y);a.scale(this.z,this.z);a.font="20px Arial";a.fillStyle="white";a.fillText("Tank",0,0);a.translate(50,0);a.fillStyle="blue";a.fillRect(20,0,10*this.s.fuel,-20)};tb.prototype.update=function(){return null};tb.prototype.type=function(){return"toolbar"};function wormhole(a,b,c,d){this.x=a;this.y=b;this.z=1;this.m=d;this.r=c;this.type="wormhole"}wormhole.prototype.draw=function(a){a.translate(this.x,this.y);a.scale(this.z,this.z);a.beginPath();var b=a.createRadialGradient(20,20,this.r/2-10,0,0,80);b.addColorStop(0,"#101010");b.addColorStop(1,"white");a.fillStyle=b;a.arc(0,0,this.r,0,6.28);a.fill()};wormhole.prototype.update=function(){return null};wormhole.prototype.type=function(){return"wormhole"};function planet(a,b,c,d){this.x=a;this.y=b;this.z=1;this.r=c;this.m=d;this.type="planet"}planet.prototype.draw=function(a){a.translate(this.x,this.y);a.scale(this.z,this.z);a.beginPath();var b=a.createRadialGradient(20,20,this.r/2-10,0,0,80);b.addColorStop(0,"white");b.addColorStop(1,"#2c2c2c");a.fillStyle=b;a.arc(0,0,this.r,0,6.28);a.closePath();a.fill()};planet.prototype.update=function(){return null};function ship(a,b,c){this.x=a;this.y=b;this.z=1;this.rotSpeed=this.rotation=0;this.radius=100;this.forces=[];this.speed={x:0,y:0};this.gravi=[];this.fuel=c;this.rotateBurst=this.burst=!1;this.type="ship"}
ship.prototype.draw=function(a){a.translate(this.x,this.y);a.scale(this.z,this.z);a.rotate(this.rotation);a.beginPath();a.moveTo(-10,-7);a.lineTo(-3,-7);a.lineTo(-3,-6);a.lineTo(-2,-6);a.lineTo(-2,-5);a.lineTo(-1,-5);a.lineTo(-1,-4);a.lineTo(12,-4);a.lineTo(12,-3);a.lineTo(17,-3);a.lineTo(17,-2);a.lineTo(18,-2);a.lineTo(18,-1);a.lineTo(19,-1);a.lineTo(19,0);a.lineTo(20,0);a.lineTo(20,1);a.lineTo(19,1);a.lineTo(19,2);a.lineTo(18,2);a.lineTo(18,3);a.lineTo(17,3);a.lineTo(17,4);a.lineTo(12,4);a.lineTo(12,
5);a.lineTo(-1,5);a.lineTo(-1,6);a.lineTo(-2,6);a.lineTo(-2,7);a.lineTo(-3,7);a.lineTo(-3,8);a.lineTo(-10,8);a.lineTo(-10,7);a.lineTo(-9,7);a.lineTo(-9,6);a.lineTo(-8,6);a.lineTo(-8,5);a.lineTo(-7,5);a.lineTo(-7,4);a.lineTo(-9,4);a.lineTo(-9,3);a.lineTo(-10,3);a.lineTo(-10,2);a.lineTo(-12,2);a.lineTo(-12,1);a.lineTo(-13,1);a.lineTo(-13,0);a.lineTo(-12,0);a.lineTo(-12,-1);a.lineTo(-10,-1);a.lineTo(-10,-2);a.lineTo(-9,-2);a.lineTo(-9,-3);a.lineTo(-7,-3);a.lineTo(-7,-4);a.lineTo(-8,-4);a.lineTo(-8,-5);
a.lineTo(-9,-5);a.lineTo(-9,-6);a.lineTo(-10,-6);a.lineTo(-10,-7);this.burst&&(a.moveTo(-15,0),a.lineTo(-19,0),a.lineTo(-19,1),a.lineTo(-15,1));1==this.rotateBurst&&(a.moveTo(12,-7),a.lineTo(12,-12),a.lineTo(11,-12),a.lineTo(11,-7));-1==this.rotateBurst&&(a.moveTo(12,8),a.lineTo(12,13),a.lineTo(11,13),a.lineTo(11,8));a.closePath();a.fillStyle="#c2c2c2";a.fill()};ship.prototype.addGravi=function(a){this.gravi.push(a)};ship.prototype.speedEnd=function(){this.burst=!1};
ship.prototype.rotateEnd=function(){this.rotateBurst=0};ship.prototype.speedUp=function(){0>=this.fuel?this.burst=!1:(this.burst=!0,this.speed.x+=.02*Math.cos(this.rotation),this.speed.y+=.02*Math.sin(this.rotation),this.fuel-=.04)};ship.prototype.rotate=function(a){0>=this.fuel||(this.rotSpeed+=.001*a,this.fuel-=.03,this.rotateBurst=a)};
ship.prototype.update=function(){y=x=0;x=this.speed.x;y=this.speed.y;this.rotation+=this.rotSpeed;for(var a=$jscomp.makeIterator(this.gravi),b=a.next();!b.done;b=a.next()){g=b.value;bufX=g.x-this.x;bufY=g.y-this.y;dist=Math.atan2(bufY,bufX);r=Math.sqrt(bufX*bufX+bufY*bufY);if(5>r-g.r)return g;f=g.m/(r*r)*150;x+=Math.cos(dist)*f;y+=Math.sin(dist)*f}this.x+=x;this.y+=y;this.speed.y=y;this.speed.x=x;return null};function star(a,b,c){this.x=a;this.y=b;this.z=c;this.radius=10;this.type="star"}star.prototype.draw=function(a){a.translate(this.x,this.y);a.scale(this.z,this.z);a.beginPath();var b=a.createRadialGradient(.5,.5,.5,1,1,1);b.addColorStop(0,"black");b.addColorStop(1,"white");a.fillStyle=b;a.arc(this.x,this.y,this.radius,0,6.28);a.fill()};star.prototype.update=function(){this.x+=.5*this.z;return null};var lvls=[{s:{x:50,y:100,f:5},ps:[{x:500,y:400,r:75,m:3}],wh:{x:750,y:450,r:30,m:2},ast:[{x:300,y:400,r:.02,m:.01,z:1}]},{s:{x:50,y:100,f:5},ps:[{x:450,y:100,r:50,m:3},{x:500,y:400,r:80,m:2}],wh:{x:750,y:450,r:50,m:2}},{s:{x:50,y:100,f:5},ps:[{x:300,y:350,r:50,m:3},{x:500,y:400,r:80,m:2},{x:500,y:400,r:80,m:2}],wh:{x:750,y:450,r:50,m:2}},{s:{x:60,y:200,f:5},ps:[{x:300,y:350,r:25,m:2.5},{x:300,y:500,r:50,m:1.5},{x:500,y:400,r:50,m:2},{x:500,y:400,r:50,m:2}],wh:{x:750,y:450,r:50,m:2}}];function asteroid(a,b,c,d,e){this.x=a;this.y=b;this.z=e;this.rf=c;this.r=0;this.m=d;this.type="meteroit";this.img=new Image;this.img.src="assets/asteroid.png"}asteroid.prototype.draw=function(a){a.translate(this.x,this.y);a.scale(this.z,this.z);a.rotate(this.r);a.drawImage(this.img,-this.img.width/2,-this.img.height/2)};asteroid.prototype.update=function(){this.r+=this.rf;return null};
